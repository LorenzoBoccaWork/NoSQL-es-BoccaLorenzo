### Task 1.1
Aggiungere 3 utenti

db.users.insertMany([
  {
    name: { first: "Test", last: "User1" },
    email: "test1@delete.com",
    role: "customer",
    status: "test"
  },
  {
    name: { first: "Test", last: "User2" },
    email: "test2@delete.com",
    role: "customer",
    status: "test"
  },
  {
    name: { first: "Test", last: "User3" },
    email: "test3@delete.com",
    role: "customer",
    status: "test"
  }
])

------------------ Risposta terminale ------------------
{
  acknowledged: true,
  insertedIds: {
    '0': ObjectId('68f8a6cfb83ce627ae8ce999'),
    '1': ObjectId('68f8a6cfb83ce627ae8ce99a'),
    '2': ObjectId('68f8a6cfb83ce627ae8ce99b')
  }
}

### Task 1.2

1) // Trovare i documenti che corrispondono al tuo filtro di eliminazione
db.users.find({ status: "test" })

2) // Contali
db.users.countDocuments({ status: "test" })

---------- Risposta terminale ----------------
1) Mi fa vedere utenti
2) Sono totali 3 utenti test

### 1.3
Eliminare l'utente con email "test1@delete.com"

db.users.deleteOne({ email: "test1@delete.com" })

---------- Risposta terminale ----------------
{
  acknowledged: true,
  deletedCount: 1
}

### 1.4
Verificare che l'utente sia realmente stato eliminato

1) db.users.findOne({ email: "test1@delete.com" })

2) Contare gli utenti di test rimanent
db.users.countDocuments({ status: "test" })

---------------- Risposta terminale ---------------
1) Mi da null
2) Mi dice che ci sono 2 utenti con status "test"

### 2.1
Eliminare tutti gli utenti con stato "test"

db.users.deleteMany({ status: "test" })

-------------- Risposta terminale -----------------
{
  acknowledged: true,
  deletedCount: 2
}
Ho controllato poi se c'erano utenti con status "test" e mi ritorna un valore 0

### Task 2.2
Creare e poi eliminare i prodotti con categoria "Test" e prezzo minori di 10

1) // Inserimento prodotti di test
db.products.insertMany([
  {
    sku: "TEST-001",
    name: "Test Product 1",
    category: "Test",
    price: 5.99,
    status: "active"
  },
  {
    sku: "TEST-002",
    name: "Test Product 2",
    category: "Test",
    price: 8.99,
    status: "active"
  }
])

2) // Anteprima
db.products.find({ category: "Test", price: { $lt: 10 } })

3) // Elimina
db.products.deleteMany({ category: "Test", price: { $lt: 10 } })

----------------- Risposta terminale -------------------
1) {
  acknowledged: true,
  insertedIds: {
    '0': ObjectId('68f8a921b83ce627ae8ce99c'),
    '1': ObjectId('68f8a921b83ce627ae8ce99d')
  }
}
2) Mi restiutisce i due utenti creati nello step 1
3) {
  acknowledged: true,
  deletedCount: 2
}

### Task 3.1
Eliminare gli utenti dove lo stato è "inactive"

db.users.deleteMany({ status: "inactive" })

----------------- Risposta terminale ------------------
{
  acknowledged: true,
  deletedCount: 5
}

### Task 3.2
Eliminare i prodotti creati prima di una data specifica

db.products.deleteMany({
  createdAt: { $lt: ISODate("2024-01-01") }
})

------------- Risposta terminal--------------------
{
  acknowledged: true,
  deletedCount: 10
}

### 4.1

1) // Creare una collezione di test
db.testCollection.insertMany([
  { name: "Item 1" },
  { name: "Item 2" },
  { name: "Item 3" }
])

2) // Visualizzare tutto
db.testCollection.find()

3) // Eliminare TUTTI i documenti
db.testCollection.deleteMany({})

4) // Verificare che sia vuota
db.testCollection.countDocuments()  

------------------ Risposta terminale --------------------
1) {
  acknowledged: true,
  insertedIds: {
    '0': ObjectId('68f8ab11b83ce627ae8ce99e'),
    '1': ObjectId('68f8ab11b83ce627ae8ce99f'),
    '2': ObjectId('68f8ab11b83ce627ae8ce9a0')
  }
}
2) Mi da item 1, 2, 3
3) {
  acknowledged: true,
  deletedCount: 3
}
4) Mi da ilo valore 0

### Task 5.1
Ccontrassegnare i documenti come eliminati

// "Elimina" aggiornando lo stato
db.users.updateOne(
  { email: "user@example.com" },
  {
    $set: {
      status: "deleted",
      deletedAt: new Date()
    }
  }
)

### 5.2
Spostare i documenti nella collezione di archivio prima di eliminarli

1) // Trova il documento da archiviare
const user = db.users.findOne({ email: "archive@example.com" })

2) // Inserisci nell'archivio
db.users_archive.insertOne({
  ...user,
  archivedAt: new Date()
})

3) // Poi elimina dalla collezione principale
db.users.deleteOne({ _id: user._id })

---------------- Risposta del terminale ---------------
1) Non c'è nulla
2) {
  acknowledged: true,
  insertedId: ObjectId('68f8ac42b83ce627ae8ce9a1')
}
3) Mi da errore in quando nel punto 1 non lo ha trovato

### Task 6.1
Eliminare gli utenti da una specifica città

db.users.deleteMany({ "address.city": "TestCity" })

---------- Risposta terminale ------------------
{
  acknowledged: true,
  deletedCount: 0
}

### Task 6.2
Eliminare i prodotti con un tag specifico

db.products.deleteMany({ tags: "discontinued" })

---------- Risposta terminale ------------
{
  acknowledged: true,
  deletedCount: 0
}

### Task 7.1

const result = db.users.deleteMany({ status: "test" })
{
  acknowledged: true,   
  deletedCount: 5         
}

