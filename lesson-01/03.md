### Task 1.1
Aggiornare l'email di Emma Wilson a "emma.w@example.com"

db.users.updateOne(
  { email: "emma.wilson@example.com" },
  { $set: { email: "emma.w@example.com" } }
)

------------- Risposta terminale -------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}
E' giusto

### Task 1.2
Aggiornare il prezzo delle cuffie Sony a $379.99

db.products.updateOne(
  { sku: "HDPHN-SONY-WH1000XM5" },
  { $set: { price: 379.99 } }
)

### Task 1.3

db.users.updateOne(
  { email: "michael.chen@example.com" },
  {
    $set: {
      phone: "+1-555-0150",
      status: "inactive"
    }
  }
)

--------------- Risposta terminale ------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}
E' gisuto

### 2.1
Impostare per tutti i clienti preferences.newsletter = true

db.users.updateMany(
  { role: "customer" },
  { $set: { "preferences.newsletter": true } }
)

----------------- Risposta terminale --------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 26,
  modifiedCount: 14,
  upsertedCount: 0
}

### Task 2.2
Aggiungere un campo lastUpdated con la data corrente a tutti i prodotti attivi

db.products.updateMany(
  { status: "active" },
  { $set: { lastUpdated: new Date() } }
)

------------------ Risposta terminale --------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 14,
  modifiedCount: 14,
  upsertedCount: 0
}

### Task 2.3
Aumentare tutti i prezzi dei prodotti nella categoria "Electronics" impostando un nuovo campo updated a true.

db.products.updateMany(
  { category: "Electronics" },
  { $set: { updated: true } }
)

----------------- Risposta terminale -------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 14,
  modifiedCount: 14,
  upsertedCount: 0
}

### 3.1
Se ho un campo quantity, incrementalo di 10 per Dell XPS 13

db.products.updateOne(
  { sku: "LAPTOP-DELL-XPS13" },
  { $inc: { quantity: 10 } }
)

----------------- Risposta terminale --------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

### Task 3.2
Diminuire il prezzo delle cuffie Sony di $20 usando $inc

db.products.updateOne(
  { sku: "HDPHN-SONY-WH1000XM5" },
  { $inc: { price: -20 } }
)

-------------------- Risposta terminale -------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

### Task3.3
Aggiungere un campo loginCount all'utente di Emma e incrementalo

1) // Aggiornare aggiungendo capo loginCount
db.users.updateOne(
  { email: "emma.w@example.com" },
  { $inc: { loginCount: 1 } }
)

2) // Aggiornare per incrementare di 1
db.users.updateOne(
  { email: "emma.w@example.com" },
  { $inc: { loginCount: 1 } }
)

-------------------- Risposta terminale ------------------
1) {
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

2) {
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

### 4.1
Moltiplicare tutti i prezzi dei prodotti per 0.9

db.products.updateMany(
  { status: "active" },
  { $mul: { price: 0.9 } }
)

-------------------- Risposta terminale ---------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 14,
  modifiedCount: 14,
  upsertedCount: 0
}

### 5.1
Rimuovere il campo updated da tutti i prodotti

db.products.updateMany(
  {},
  { $unset: { updated: "" } }
)

---------------- Risposta terminale ------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 14,
  modifiedCount: 14,
  upsertedCount: 0
}

### Task 5.2
Rimuovere il numero di telefono da uno specifico utente

db.users.updateOne(
  { email: "michael.chen@example.com" },
  { $unset: { phone: "" } }
)

---------------- Risposta terminale ------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

### Task 6.1
Rinominare il campo loginCount in totalLogins per tutti gli utenti che lo hanno

db.users.updateMany(
  { loginCount: { $exists: true } },
  { $rename: { loginCount: "totalLogins" } }
)

-------------- Risposta terminale -------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

### Task 7.1
Aggiornare la citt√† di Emma a "Boston"

db.users.updateOne(
  { email: "emma.w@example.com" },
  { $set: { "address.city": "Boston" } }
)

------------ Risposta terminale ---------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

### Task 7.2
Aggiornare le cuffie Sony per aggiungere una nuova specifica: weight: "250g"

db.products.updateOne(
  { sku: "HDPHN-SONY-WH1000XM5" },
  { $set: { "specifications.weight": "250g" } }
)

-------------- Risposta terminale -------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

### 8.1
Aggiungere e aggiornare il campo updatedAt con il timestamp corrente per un prodotto.

1) db.products.updateOne(
  { sku: "LAPTOP-DELL-XPS13" },
  { $currentDate: { updatedAt: true } }
)

2) // Specifica il tipo
db.products.updateOne(
  { sku: "LAPTOP-DELL-XPS13" },
  { $currentDate: { updatedAt: { $type: "date" } } }
)

---------------- Risposta terminale --------------------
1) {
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}
2) {
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

### Task 9.1
Aumentare il prezzo di 10, imposta lo stato "active", imposta alla data corrente nelle cuffie sony

db.products.updateOne(
  { sku: "HDPHN-SONY-WH1000XM5" },
  {
    $inc: { price: 10 },
    $set: { status: "active" },
    $currentDate: { updatedAt: true }
  }
)

------------------------ Risposta terminale ------------------------
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}

